<!DOCTYPE html>
<html>
<head>
	<title>Honeycomb Profiler</title>
  <script src="https://cdn.firebase.com/js/client/2.3.2/firebase.js"></script>    
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>

</head>

<body>
	
</body>

<script>
 $(document).ready(function(){

    var hash;
    var code;
    var binary = "";
    var choice = 9; 
    var redMeat = 0; var whiteMeat = 0; var pork = 0; 
    var fish = 0; var otherSeafood = 0; var tofu = 0;
    var peanuts = 0; var treenuts = 0; var dairy = 0;
    var cheese = 0; var eggs = 0; var wheat = 0;
    var gluten = 0; var soy = 0; var sesameseeds = 0;
    var fruit = 0; var shellfish = 0; var corn = 0; 
    var someThingElse = 0; var spicy = 0; var mushrooms = 0; 
    var onions = 0; var dessert = 0;

    //PUSH USERSTRING TO FIREBASE USING USERAUTH
        var ref = new Firebase("https://honeycombapp.firebaseio.com/");
        var url = String(window.location.href);
        hash = url.substring(url.indexOf('?')+1);
        var username = hash.split(':')[0];
        code = hash.substring(hash.indexOf(':')+1);

        
        if (int(code[0])% 2 != 0) {
        	redMeat = 1;
        }

        if (int(code[0]) == 2 | int(code[0]) == 3 | int(code[0]) == 6 | int code[0] == 7){
        	whiteMeat = 1;
        }

        if (int(code[0]) == 4 | int(code[0]) == 5 | int(code[0]) == 6 | int code[0] == 7){
        	pork = 1;
        }

        if (int(code[0])% 2 != 0) {
        	fish = 1;
        }

        if (int(code[0]) == 2 | int(code[0]) == 3 | int(code[0]) == 6 | int code[0] == 7){
        	otherSeafood = 1;
        }

        if (int(code[0]) == 4 | int(code[0]) == 5 | int(code[0]) == 6 | int code[0] == 7){
        	tofu = 1;
        }

        if (int(code[0])% 2 != 0) {
        	peanuts = 1;
        }

        if (int(code[0]) == 2 | int(code[0]) == 3 | int(code[0]) == 6 | int code[0] == 7){
        	treenuts = 1;
        }

        if (int(code[0]) == 4 | int(code[0]) == 5 | int(code[0]) == 6 | int code[0] == 7){
        	dairy = 1;
        }

        if (int(code[0])% 2 != 0) {
        	cheese = 1;
        }

        if (int(code[0]) == 2 | int(code[0]) == 3 | int(code[0]) == 6 | int code[0] == 7){
        	eggs = 1;
        }

        if (int(code[0]) == 4 | int(code[0]) == 5 | int(code[0]) == 6 | int code[0] == 7){
        	wheat = 1;
        }
        if (int(code[0])% 2 != 0) {
        	gluten = 1;
        }

        if (int(code[0]) == 2 | int(code[0]) == 3 | int(code[0]) == 6 | int code[0] == 7){
        	soy = 1;
        }

        if (int(code[0]) == 4 | int(code[0]) == 5 | int(code[0]) == 6 | int code[0] == 7){
        	sesameseeds = 1;
        }

        if (int(code[0])% 2 != 0) {
        	fruit = 1;
        }

        if (int(code[0]) == 2 | int(code[0]) == 3 | int(code[0]) == 6 | int code[0] == 7){
        	corn = 1;
        }

        if (int(code[0]) == 4 | int(code[0]) == 5 | int(code[0]) == 6 | int code[0] == 7){
        	shellfish = 1;
        }

        if (int(code[0])% 2 != 0) {
        	spicy = 1;
        }

        if (int(code[0]) == 2 | int(code[0]) == 3 | int(code[0]) == 6 | int code[0] == 7){
        	mushrooms = 1;
        }

        if (int(code[0]) == 4 | int(code[0]) == 5 | int(code[0]) == 6 | int code[0] == 7){
        	onions = 1;
        }

        binary = binary + String(choice) + String(redMeat) + String(whiteMeat) + String(Pork)  + String(fish) + String(otherSeafood) + String(tofu) + String(peanuts) + String(treenuts) + String(dairy) + String(cheese) + String(eggs) + String(wheat) + String(gluten) + String(soy) + String(sesameseeds) + String(fruit) + String(shellfish) + String(corn) + String(someThingElse) + String(spicy) + String(mushrooms) + String(onions) + String(dessert);

        console.log(username);
        console.log(code);
        console.log(binary);

        var usersRef = ref.child("users");
        usersRef.child(String(hash)).set({
          username: binary
        });
         
        window.location = "../restaurants.html?" + username; 

  });

</script>

</html>